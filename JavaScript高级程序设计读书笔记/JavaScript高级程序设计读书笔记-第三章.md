#***JavaScript高级程序设计读书笔记***
---

##第三章 基本概念

###主要内容：
* 语法
* 数据类型
* 流控制语句
* 函数

###3.1语法

####3.1.1JavaScript区分大小写
其实个人感觉语言都区分大小写就好了吧，懒得记哪些区分哪些不区分了

####3.1.2标识符
第一个字符必须是一个字母，下划线或者美元符号，感觉综合了C和PHP
标识符中的字母也可以包含扩展的ASCII或Unicode字母字符（汉字都可以拿来当标识符，不错不错）

####3.1.3注释
跟C的一样

####3.1.4严格模式
ECMAScript 5引入的一个概念，为JavaScript定义了一种不同的解析和执行模型。在严格模式下，ECMAScript3中的一些不确定的行为将得到处理，而且对于某些不安全的操作也会抛出错误，想在哪启用严格模式，可以在他的顶部添加"use strict"，比如整个脚本或者函数内部，支持严格模式的浏览器有IE10+、Firefox 4+、Safari5.1+、Opera 12+和Chrome。
>我想知道不确定行为和所谓的不安全的操作都有哪些

####3.1.5语句
语句结尾的分号不是必需，但是如果忘写而又要压缩js代码的话，就蛋疼了

###3.2关键字和保留字

全部关键词

| break   | do       | instanceof | typeof | case    |
|---------|----------|------------|--------|---------|
| else    | new      | var        | catch  | finally |
| return  | void     | continue   | for    | switch  |
| while   | debugger | function   | this   | with    |
| default | if       | throw      | delete | in      |
| try     |          |            |        |         |

*保留字就不抄了，反正很大可能性没用，把高亮脚本改下，碰到这些词的时候，来个不一样的颜色就是了，彩虹色怎么样*

###3.3变量

ECMAScript变量是松散类型的，可以用来保存任何类型的数据。意思就是说，前一刻这个变量是Number类型，下一刻就可以赋值成String类型了，声明的变量如果没有初始化的话，会默认设为undefined，用var声明的变量是声明这个变量的作用域中的局部变量，不用var的话，会把它创建成一个全局变量。

###3.4数据类型

ECMAScript中有5种数据类型，Number、Undefined、Null、Boolean、String和Object，不支持任何创建自定义类型的机制

####3.4.1 typeof操作符

返回变量或者字面值常量的类型，返回的可能除了五大类型之外还有一个，那就是function

####3.4.2 Undefined类型
对于未声明的变量，只能进行一项操作，即使用typeof检查它的数据类型，会返回一个undefined

####3.4.3 Null类型

逻辑上表示一个空指针对象；用typeof检测时会返回object；
如果定义的变量准备在将来用于保存对象，那最好将它初始化为null，这样只要直接检查Null值就可以知道相应的变量是否已经保存了一个对象的引用
实际上，undefined的值是派生自null值的，因此null==undefined为true

####3.4.4 Boolean类型

Boolean类型的字面值是区分大小写的，True和False都不是Boolean值
其他类型的值都可以转换成这个类型；

####3.4.5 Number类型

整数可以通过八进制或十六进制的字面值来表示，八进制前导0，十六进制前导0x，超出范围（如09）将被当成十进制，十六进制超出范围会报错，进行计算的时候会被转成十进制

超过浮点数范围的数，如果是正数会被换成Infinity，如果是负数会被换成-Infinity
如果某次计算返回了正或负的Infinity值，那这个值将无法继续参与下一次的运算，因为Infinity不是能够参与计算的数值。可以用isFinite()函数检测数值是否超出计算范围，没超出返回true;

NaN,非数值，当返回而未返回数值的情况，如0/0；任何涉及NaN的操作都会返回Nan，NaN跟认识值都不等，包括它本身，所以要检测一个值是不是NaN,要使用isNaN()函数，任何不能被转换为数值的值都会让这个函数返回true;

数值转换：Number()、parseInt()、parseFloat()可用于把非数值转换为数值，Number()可用于任何数据类型，而另两个函数专门用于把字符串转成数值

* Number函数的转换规则
    - 如果是null值，返回0;如果是undefined，返回NaN
    - 如果是字符串
        + 如果字符串中只包含数字，则将其转换成十进制数值（会忽略前导零）
        + 如果字符串中包含有效的十六进制格式，则将其转换成同样大小的十进制数值
        + 如果字符串为空，则将其转换为0
        + 如果字符串中包含上述格式之外的字符，则转成NaN（跟PHP不同，php会试着把前边的数字字符转成数值）
    - 如果是对象，则调用valueof()方法，然后依照前面的规则转换返回的值，如果结果是NaN，则调用对象的toString()方法，然后再依照前面的规则转换返回的字符串值
* parseInt()函数的转换规则
    - parseInt()会从前往后找到第一个非空字符，如果第一个非空字符不是数字字符或者负号，返回NaN,（即parseInt()转换空字符会返回NaN）;如果是则继续解析第二个字符，直到解析完所有后续字符或者遇到了一个非数字字符。跟php一样
    - 能识别十进制、八进制和十六进制（ES3和ES5不一样，ES5不能正确识别八进制数会当成十进制数处理）
    - 可以设置第二个参数，设置转换时使用的基数，如果知道要解析的值是十六进制格式的字符串，如：parseInt("AF",16)结果是175
* parseFloat()跟parseInt()类似，但只解析十进制值，如果字符串包含的是一个可解析为整数的数，此函数会返回整数。

####3.4.6 String类型

#####1.转义字符

|  字符  |                   含义                  |         举例        |
|--------|-----------------------------------------|---------------------|
| \xnn   | 以十六进制代码nn表示的一个字符（ASCII） | \x41表示A           |
| \unnnn | 以十六进制代码nnnn表示的一个Unicode字符 | \u03a3表示希腊字符Σ |

#####2.字符串的特点

ECMAScript中的字符串是不可变的，要改变一个变量保存的字符串，首先要销毁原来的字符串，然后用另一个包含新值的字符串填充该变量

#####3.转换为字符串

* toString()返回相应值的字符串表现，数值、对象、布尔值、和字符串值都有这个方法，null和undefined没有，在调用数值的toString()方法时可以传递参数设置输出字符串数字的基数，以任意进制输出数字字符串
* 如果不知道要转换的值是不是Null或undefined的情况下，还可以使用转型函数String()，这个函数能够将任何类型的值转换成字符串，包括Null和undefined

####3.4.7 object类型

Object的每个实例都具有下列属性和方法：
* constructor:保存着用于创建当前对象的函数
* hasOwnProperty(propertyName):用于检查给定的属性在当前对象实例中是否存在，其中，作为参数的属性名必须以字符串形式指定
* isPrototyof(object):用于检查传入的对象是否是传入对象的原型
* propertyIsEnumerable(propertyName):用于检查给定的属性是否能使用for-in语句来枚举。参数必须以字符串形式指定
* toLocaleString():返回对象的字符串表示，该字符串与执行环境的地区对应
* toString():返回对象的字符串表示
* valueof():返回对象的字符串、数值或布尔值表示，通常与toString()的返回值相同。

###3.5操作符

####3.5.1一元操作符

#####3.5.1.1.递增和递减操作符
* 应用于任何类型时，结果都为数值变量
* 在应用于一个包含有效数字字符的字符串时，先将其转换为数字值，再执行加减1的操作
* 在用于对象时，先调用对象的valueOf()方法，如果是NaN,则在调用toString()方法后再应用前述规则，对象变量变成数值变量

#####3.5.1.2.一元加和减操作符
主要用于基本的算术运算，也可以用于转换数据类型

####3.5.2 位操作符

ECMAScript中的所有数值都以IEEE-754 64位格式存储，但位操作符并不直接操作64位的值，而是先将64位的值转换成32位的整数，然后执行操作，最后再将结果换回64位

负数用补码表示

在对特殊的NaN和Infinity值应用位操作时，这两个值都会被当成0来处理。

1.按位非（NOT）

~,返回数值的反码

2.按位与（AND）

&,按位与就是把两个数值的每一位对齐，然后以各位的乘积作为结果中所在位的数值

3.按位或(OR)

|,按位把两个数值的每一位对齐，进行或运算，结果按位保存在结果的位上

4.按位异或(XOR)

^，相同返回0，不同返回1

5.左移

<<,把数值的所有位向左移动指定的位数，空位由0填充，如10左移三位，结果是10000；

6.有符号的右移

\>>,与左移相反，数值向右移动，但保留符号位，空出的位由符号位的值填充

7.无符号右移

\>>>将数值的所有32位都向右移动。空位用0来填充

####3.5.3 布尔操作符

非(!)、与(&&)、或(||)

**与(&&):**

* 如果第一个操作数是对象，则返回第二个操作数
* 如果第二个操作数是对象，则只有在第一个操作数的求值结果为 true 的情况下才会返回该对象
* 如果两个操作数都是对象，则返回第二个操作数
* 如果有一个操作数是 null，则返回 null
* 如果有一个操作数是 NaN，则返回 NaN
* 如果有一个操作数是 undefined，则返回 undefined

逻辑与操作属于短路操作，如果第一个操作数是false，就不会对第二个操作数求值

**或(||)**

* 如果第一个操作数是对象，则返回第一个操作数
* 如果第一个操作数的求值结果为 false，则返回第二个操作数
* 如果两个操作数都是对象，则返回第一个操作数；
* 如果两个操作数都是 null，则返回 null；
* 如果两个操作数都是 NaN，则返回 NaN；
* 如果两个操作数都是 undefined，则返回 undefined。

逻辑或操作也是短路操作符,可以利用逻辑或的这一行为来避免为变量赋null或undefined值。例如：var a = b||c
变量a将被赋予等号后面两个值中的一个。b是优先赋给a的值，当b为null等无效值时，把c赋给a

####3.5.4 乘性操作符
*、/、%

**\***

* 如果是Infinity与0相乘，结果是NaN;
* 如果有一个操作数不是数值，则在后台调用Number()将其转换为数值，然后再计算

**/**

* 如果是Infinity被Infinity除，则结果是NaN;
* 0被0除，结果是NaN;
* 如果是非零的有限数被0除，结果是Infinity或-Infinity
* 如果是Infinity被任何非零数值除，结果是Infinity或-Infinity

**%**

* 如果被除数是无穷大，或除数是0，结果是NaN
* 如果被除数是有限大的数值，而除数是无穷大，则结果是被除数
* 如果被除数是0，结果是0

####3.5.5 加性操作符

1.加法

* Infinity 加 -Infinity，结果是NaN
* 如果两个操作数都是字符串，则拼接两个字符串，如果只有一个操作数是字符串，则将另一个操作符转换成字符串，然后再将两个字符串拼接起来
* 如果有一个操作数是对象、数值、或布尔值，则调用它们的toString()方法取得相应的字符串值，然后再应用前面关于字符串的规则，对于undefined和null，则分别调用String()函数并取得字符串“undefined”和“null”;

2.减法

* 如果正负相同的Infinity相减，结果为NaN，不同的则当作无穷处理
* 如果有一个操作数是对象，则调用对象的valueOf()方法以取得表示该对象的数值。如果得到的值是NaN，则减法的结果是NaN，如果对象没有valueOf()方法，则调用其toString()方法并将得到的字符串转换为数值。

####3.5.6 关系操作符
<、>、<=、>=

* 如果两个操作数都是字符串，则比较两个字符串对应的字符编码值。
* 如果一个操作数是数值，则将另一个操作数转换为一个数值，然后执行数值比较。
* 如果一个操作数是对象，则调用这个对象的 valueOf()方法，用得到的结果按照前面的规则执行比较。如果对象没有 valueOf()方法，则调用toString()方法，并用得到的结果根据前面的规则执行比较。
* 如果一个操作数是布尔值，则先将其转换为数值，然后再执行比较。

####3.5.7 相等操作符

1.==、!=
* null和undefined是相等的
* 在比较相等前，不能将null和undefined转换成其他任何值
* 如果两个操作符都是对象，则比较它们是不是同一个对象，如果两个操作符都指向同一个对象，则相等操作符返回true;否则返回false

|     表达式      |  值   |
|-----------------|-------|
| null==undefined | true  |
| true==2         | false |
| null==0         | false |
| undefined==0    | false |

2.===、!==

在比较之前不转换操作数

####3.5.8 条件操作符

?:

####3.5.9 赋值操作符
=
####3.5.10 逗号操作符

用逗号可以在一条语句中执行多个操作;用于赋值时，逗号操作符总会返回表达式的最后一项

###3.6语句

if

do-while

while

for

for-in

label:类似goto语句，不过一般要与for语句等循环语句配合使用，由break或continue语句引用

break和continue

with:将代码的作用域设置到一个特定的对象中，如

    with(location){
        var qs=searh.substring(1); //其实是表示的location.search.substring(1).
    }
with语句的代码块内部，每个变量首先被认为是一个局部变量，而如果在局部环境中找不到该变量的定义，就会查询location对象中是否有同名的属性。如果发现了同名属性，则以location对象属性值作为变量的值。

switch:ECMAScript中switch语句中可以使用任何数据类型，每个case的值不一定是常量，可以是变量，甚至是表达式。
example1:

    switch("hello world"){
        case "hello"+" world.":
            alert("Greeting was found.");
            break;
        case "goodbye":
            alert("Closing was found.");
            break;
        default:
            alert("Unexpected message was found.");
    }

example2:

    var num=25;
    switch(true){
        case num<0:
            alert("Less than 0.");
            break;
        case num>=0&&num<=10:
            alert("Between 0 and 10.");
            break;
        case num>10&&num<=20:
            alert("Between 10 and 20.");
        default:
            alert("More than 20.");
    }
switch语句在比较值时使用的是全等操作符，因此不会发生类型转换

###3.7函数

function的参数

ECMAScript的函数参数是以一个包含零或多个值的数组的形式传递的。所以不介意传进来多少个参数，也不在乎传进来参数是什么数据类型。
传入function的参数自动形成一个arguments数组
可以通过arguments.length获取参数的个数

***没有重载***

###3.8小结
